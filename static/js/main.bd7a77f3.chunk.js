(this["webpackJsonpsmart-parking-system-client-web"]=this["webpackJsonpsmart-parking-system-client-web"]||[]).push([[0],{25:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var r,c,i,a=n(0),o=n.n(a),s=n(17),l=n.n(s),j=n(9),b=(n(25),n(3)),d="/auth",u="/history",h={auth:{login:d+"/login",registration:d+"/registration"},home:{main:"/home"},history:{main:u,details:u+"/:id"}},O=function(){return h},g=n(4),m=n(5),p=n(6),x=n(2),f=x.b.div(r||(r=Object(p.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 15%;\n"]))),v=n(11);!function(e){e[e.RUS=0]="RUS",e[e.ENG=1]="ENG"}(c||(c={}));var y,C,k,P,S,E,w,N,U,I,R=(i={},Object(v.a)(i,c.ENG,{pages:{login:{phoneNumber:"Phone number",sendConfirmationCodeBtn:"Code",login:"Login",sendConfirmationCodePlaceholder:"Confirmation code"},home:{rules:{first:"Before entering, make sure that the rear license plate is readable",second:"When entering the parking lot, our camera reads your vehicle number, no action is required from you",third:"When leaving, the camera reads the vehicle number, then automatically deducts the required amount from your card and opens the barrier"}}},navbar:{home:"Home",history:"History",parkings:"Parkings",profile:"Profile"}}),Object(v.a)(i,c.RUS,{pages:{login:{phoneNumber:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",sendConfirmationCodeBtn:"\u041a\u043e\u0434",login:"\u0412\u043e\u0439\u0442\u0438",sendConfirmationCodePlaceholder:"\u041a\u043e\u0434 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f"},home:{rules:{first:"\u041f\u0435\u0440\u0435\u0434 \u0432\u044a\u0435\u0437\u0434\u043e\u043c \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435, \u0447\u0442\u043e \u0437\u0430\u0434\u043d\u0438\u0439 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0437\u043d\u0430\u043a \u0447\u0438\u0442\u0430\u0435\u043c",second:"\u041f\u0440\u0438 \u0432\u044a\u0435\u0437\u0434\u0435 \u043d\u0430 \u043f\u0430\u0440\u043a\u043e\u0432\u043a\u0443 \u043d\u0430\u0448\u0430 \u043a\u0430\u043c\u0435\u0440\u0430 \u0441\u0447\u0438\u0442\u0430\u0435\u0442 \u043d\u043e\u043c\u0435\u0440 \u0432\u0430\u0448\u0435\u0433\u043e \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043d\u043e\u0433\u043e \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430, \u043e\u0442 \u0432\u0430\u0441 \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439 \u043d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f",third:"\u041f\u0440\u0438 \u0432\u044b\u0435\u0437\u0434\u0435 \u043a\u0430\u043c\u0435\u0440\u0430 \u0441\u0447\u0438\u0442\u0430\u0435\u0442 \u043d\u043e\u043c\u0435\u0440 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043d\u043e\u0433\u043e  \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430, \u0437\u0430\u0442\u0435\u043c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0441\u043f\u0438\u0448\u0435\u0442 \u0441 \u0432\u0430\u0448\u0435\u0439 \u043a\u0430\u0440\u0442\u044b \u043d\u0443\u0436\u043d\u0443\u044e \u0441\u0443\u043c\u043c\u0443 \u0438 \u043e\u0442\u043a\u0440\u043e\u0435\u0442 \u0448\u043b\u0430\u0433\u0431\u0430\u0443\u043c"}}},navbar:{home:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",history:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f",parkings:"\u041f\u0430\u0440\u043a\u043e\u0432\u043a\u0438",profile:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}}),i),z=o.a.createContext(R[c.RUS]),B=n(1),T=function(e){var t=e.onLoginClick,n=e.onSendCodeClick,r=e.isError,c=Object(a.useContext)(z),i=Object(a.useState)(""),o=Object(g.a)(i,2),s=o[0],l=o[1],j=Object(a.useState)(""),b=Object(g.a)(j,2),d=b[0],u=b[1],h=Object(a.useState)(!1),O=Object(g.a)(h,2),p=O[0],x=O[1];if(r)return Object(B.jsx)(B.Fragment,{children:"Error"});return Object(B.jsxs)(f,{children:[Object(B.jsx)(m.g,{type:"text",placeholder:c.pages.login.phoneNumber,valueChange:function(e){return l(e)}}),p&&Object(B.jsx)(m.g,{type:"text",placeholder:c.pages.login.sendConfirmationCodePlaceholder,valueChange:function(e){return u(e)}}),Object(B.jsx)(m.a,{title:p?c.pages.login.login:c.pages.login.sendConfirmationCodeBtn,click:function(){return p?t(s,d):(x(!0),void n(s))}})]})},D=n(8),F=function(){var e=Object(D.c)(""),t=Object(D.b)(),n=Object(b.h)(),r=Object(a.useState)(!1),c=Object(g.a)(r,2),i=c[0],o=c[1];console.log(t.read("driver"));return Object(B.jsx)(T,{onLoginClick:function(t,r){e.login({phoneNumber:t,confirmationCode:r},"v4").then((function(e){e&&"accessToken"in e&&(localStorage.setItem("at",e.accessToken),n("/home"))}))},onSendCodeClick:function(t){e.sendConfirmationCode(t,"v4").then((function(e){e&&"error"in e&&o(!0)}))},isError:i})},G=n(10),L=function(){var e=O(),t=Object(a.useContext)(z),n={textDecoration:"none",cursor:"pointer",color:Object(m.h)().plainText};return Object(B.jsxs)(m.c,{children:[Object(B.jsx)(m.d,{children:Object(B.jsx)(j.b,{to:e.home.main,style:n,children:t.navbar.home})}),Object(B.jsx)(m.d,{children:Object(B.jsx)(j.b,{to:e.history.main,style:n,children:t.navbar.history})}),Object(B.jsx)(m.d,{children:Object(B.jsx)(j.b,{to:e.home.main,style:n,children:t.navbar.parkings})}),Object(B.jsx)(m.d,{children:Object(B.jsx)(j.b,{to:e.home.main,style:n,children:t.navbar.profile})})]})},W=x.b.div(y||(y=Object(p.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 302px;\n  width: 928px;\n  background-color: ",";\n  border-radius: 29px;\n  box-shadow: inset 0 0 0 2px rgba(1, 1, 1, 0.15),\n    inset 0 0 0 4px rgba(136, 109, 236, 0.68), 0 0 28px 0 rgba(0, 0, 0, 0.08);\n"])),(function(e){return e.theme.widgetBackground})),H=x.b.div(C||(C=Object(p.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  width: 574px;\n"]))),q=x.b.div(k||(k=Object(p.a)(["\n  display: flex;\n  align-items: center;\n"]))),J=x.b.span(P||(P=Object(p.a)(["\n  font-size: 40px;\n  color: ",";\n"])),(function(e){return e.theme.accent})),M=x.b.span(S||(S=Object(p.a)(["\n  margin-left: 66px;\n  font-size: 18px;\n  padding-bottom: 12px;\n  padding-top: 12px;\n  color: ",";\n"])),(function(e){return e.theme.plainText})),A=function(){var e=Object(a.useContext)(z);return Object(B.jsx)(W,{children:Object(B.jsxs)(H,{children:[Object(B.jsxs)(q,{children:[Object(B.jsx)(J,{children:"1"}),Object(B.jsx)(M,{children:e.pages.home.rules.first})]}),Object(B.jsxs)(q,{children:[Object(B.jsx)(J,{children:"2"}),Object(B.jsx)(M,{children:e.pages.home.rules.second})]}),Object(B.jsxs)(q,{children:[Object(B.jsx)(J,{children:"3"}),Object(B.jsx)(M,{children:e.pages.home.rules.third})]})]})})},K=x.b.div(E||(E=Object(p.a)(["\n  display: flex;\n  justify-content: center;\n"]))),Q=x.b.div(w||(w=Object(p.a)(["\n  margin-top: 31px;\n"]))),V=x.b.div(N||(N=Object(p.a)(["\n  display: flex;\n  margin-top: 26px;\n  justify-content: space-between;\n"]))),X=x.b.div(U||(U=Object(p.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n"]))),Y=function(e){var t=e.parkingWidget,n=e.plate;return Object(B.jsx)(K,{children:Object(B.jsxs)(Q,{children:[Object(B.jsx)(A,{}),Object(B.jsxs)(V,{children:[Object(B.jsx)(m.e,{size:"mini",data:t}),Object(B.jsxs)(X,{children:[Object(B.jsx)(m.b,{size:"mini",data:{leftSideContent:"\u0412\u0430\u0448\u0430 \u043a\u0430\u0440\u0442\u0430:",rightSideContent:":("}}),Object(B.jsx)(m.b,{size:"mini",data:{leftSideContent:"\u0412\u0430\u0448 \u043d\u043e\u043c\u0435\u0440:",rightSideContent:n}})]})]})]})})};!function(e){e[e.Driver=0]="Driver",e[e.CompletedParkingProcess=1]="CompletedParkingProcess",e[e.UncompletedParkingProcess=2]="UncompletedParkingProcess"}(I||(I={}));var Z,$,_,ee,te,ne=function(e,t){switch(e){case I.Driver:return function(e){return Object(G.a)({},e)}(t);case I.CompletedParkingProcess:return function(e){return Object(G.a)(Object(G.a)({},e),{},{payment:{currency:e.payment.currency,value:Math.trunc(e.payment.value)}})}(t);case I.UncompletedParkingProcess:return function(e){return Object(G.a)(Object(G.a)({},e),{},{departureCarTime:null,payment:{currency:e.payment.currency,value:null},isCompleted:!1})}(t);default:throw new Error(e+" \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442")}},re=function(){var e=Object(D.c)(localStorage.getItem("at")),t=Object(D.d)(localStorage.getItem("at")),n=Object(D.b)(),r=Object(a.useState)(),c=Object(g.a)(r,2),i=c[0],o=c[1],s=Object(a.useState)(""),l=Object(g.a)(s,2),j=l[0],b=l[1],d=Object(a.useState)(!1),u=Object(g.a)(d,2),h=u[0],O=u[1];return Object(a.useEffect)((function(){Promise.all([e.driver(),t.lastParkingProcess()]).then((function(e){var t=Object(g.a)(e,2),r=t[0],c=t[1];if(Object(D.a)(c)){var i=ne(I.CompletedParkingProcess,c);if(!i)return void O(!0);o(i)}if(Object(D.a)(r)){var a=ne(I.Driver,r);if(!a)return void O(!0);b(a.carPlates[0]),n.save("driver",a)}}))}),[]),h?Object(B.jsx)(B.Fragment,{children:"Error"}):i?Object(B.jsx)(Y,{parkingWidget:Object(G.a)(Object(G.a)({},i),{},{price:i.payment.value,detailsClick:function(){return console.log("1")}}),plate:j}):Object(B.jsx)(B.Fragment,{children:"Loading"})},ce=x.b.div(Z||(Z=Object(p.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),ie=x.b.div($||($=Object(p.a)(["\n  background-color: ",";\n"])),(function(e){return e.theme.background})),ae=function(){return Object(B.jsxs)(ce,{children:[Object(B.jsx)(L,{}),Object(B.jsx)(ie,{children:Object(B.jsx)(b.b,{})})]})},oe=x.b.div(_||(_=Object(p.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),se=x.b.div(ee||(ee=Object(p.a)(["\n  padding: 31px;\n"]))),le=x.b.div(te||(te=Object(p.a)(["\n  padding: 31px;\n"]))),je=function(e){var t=e.parkingProcesses;return Object(B.jsxs)(oe,{children:[Object(B.jsx)(le,{children:Object(B.jsx)(m.f,{clickHandler:function(){return console.log("Click")},parameters:["\u0412\u0440\u0435\u043c\u044f","\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",t[0].driver.carPlate]})}),!t.length&&Object(B.jsx)("div",{children:"\u041d\u0435\u0442"}),t.length>0&&t.map((function(e,t){return Object(B.jsx)(se,{children:Object(B.jsx)(m.e,{size:"long",data:{date:e.entryCarTime,parkingName:e.parking.title,price:e.payment.value,detailsClick:function(){}}},t)},t)}))]})},be=function(){var e=Object(D.c)(localStorage.getItem("at")),t=Object(a.useState)(),n=Object(g.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(!1),o=Object(g.a)(i,2),s=o[0],l=o[1];return Object(a.useEffect)((function(){e.parkingProcesses().then((function(e){if(Object(D.a)(e)){var t=e.map((function(e){return ne(I.CompletedParkingProcess,e)}));c(t)}else l(!0)})).catch((function(){return l(!0)}))}),[]),s?Object(B.jsx)(B.Fragment,{children:"Error"}):r?Object(B.jsx)(je,{parkingProcesses:r}):Object(B.jsx)(B.Fragment,{children:"Loading"})},de=function(){var e=O();return Object(B.jsxs)(b.e,{children:[Object(B.jsx)(b.c,{path:e.auth.login,element:Object(B.jsx)(F,{})}),Object(B.jsxs)(b.c,{path:"/",element:Object(B.jsx)(ae,{}),children:[Object(B.jsx)(b.c,{path:e.home.main,element:Object(B.jsx)(re,{})}),Object(B.jsx)(b.c,{path:e.history.main,element:Object(B.jsx)(be,{})})]}),Object(B.jsx)(b.c,{path:"*",element:Object(B.jsx)(b.a,{to:e.auth.login})})]})};l.a.render(Object(B.jsx)(o.a.StrictMode,{children:Object(B.jsx)(x.a,{theme:Object(m.h)(),children:Object(B.jsx)(z.Provider,{value:R[localStorage.getItem("lang")?localStorage.getItem("lang")===c.RUS.toString()?c.RUS:c.ENG:/^ru\b/.test(navigator.language)?c.RUS:c.ENG],children:Object(B.jsx)(j.a,{children:Object(B.jsx)(de,{})})})})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.bd7a77f3.chunk.js.map