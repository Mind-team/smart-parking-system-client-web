(this["webpackJsonpsmart-parking-system-client-web"]=this["webpackJsonpsmart-parking-system-client-web"]||[]).push([[0],{26:function(e,n,t){},33:function(e,n,t){"use strict";t.r(n);var r,a,i,c=t(0),o=t.n(c),s=t(17),u=t.n(s),l=t(9),d=(t(26),t(2)),h="/auth",b="/history",j={auth:{login:h+"/login",registration:h+"/registration"},home:{main:"/home"},history:{main:b,details:b+"/:id"}},p=function(){return j},m=t(5),f=t(4),x=t(6),g=t(3),O=g.b.div(r||(r=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 15%;\n"]))),v=t(15);!function(e){e[e.RUS=0]="RUS",e[e.ENG=1]="ENG"}(a||(a={}));var y,k,C,S,w,E,T,P,N,G,B=(i={},Object(v.a)(i,a.ENG,{pages:{login:{phoneNumber:"Phone number",sendConfirmationCodeBtn:"Code",login:"Login",sendConfirmationCodePlaceholder:"Confirmation code"},home:{rules:{first:"Before entering, make sure that the rear license plate is readable",second:"When entering the parking lot, our camera reads your vehicle number, no action is required from you",third:"When leaving, the camera reads the vehicle number, then automatically deducts the required amount from your card and opens the barrier"}}},navbar:{home:"Home",history:"History",parkings:"Parkings",profile:"Profile"}}),Object(v.a)(i,a.RUS,{pages:{login:{phoneNumber:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",sendConfirmationCodeBtn:"\u041a\u043e\u0434",login:"\u0412\u043e\u0439\u0442\u0438",sendConfirmationCodePlaceholder:"\u041a\u043e\u0434 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f"},home:{rules:{first:"\u041f\u0435\u0440\u0435\u0434 \u0432\u044a\u0435\u0437\u0434\u043e\u043c \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435, \u0447\u0442\u043e \u0437\u0430\u0434\u043d\u0438\u0439 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0437\u043d\u0430\u043a \u0447\u0438\u0442\u0430\u0435\u043c",second:"\u041f\u0440\u0438 \u0432\u044a\u0435\u0437\u0434\u0435 \u043d\u0430 \u043f\u0430\u0440\u043a\u043e\u0432\u043a\u0443 \u043d\u0430\u0448\u0430 \u043a\u0430\u043c\u0435\u0440\u0430 \u0441\u0447\u0438\u0442\u0430\u0435\u0442 \u043d\u043e\u043c\u0435\u0440 \u0432\u0430\u0448\u0435\u0433\u043e \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043d\u043e\u0433\u043e \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430, \u043e\u0442 \u0432\u0430\u0441 \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439 \u043d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f",third:"\u041f\u0440\u0438 \u0432\u044b\u0435\u0437\u0434\u0435 \u043a\u0430\u043c\u0435\u0440\u0430 \u0441\u0447\u0438\u0442\u0430\u0435\u0442 \u043d\u043e\u043c\u0435\u0440 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043d\u043e\u0433\u043e  \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430, \u0437\u0430\u0442\u0435\u043c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0441\u043f\u0438\u0448\u0435\u0442 \u0441 \u0432\u0430\u0448\u0435\u0439 \u043a\u0430\u0440\u0442\u044b \u043d\u0443\u0436\u043d\u0443\u044e \u0441\u0443\u043c\u043c\u0443 \u0438 \u043e\u0442\u043a\u0440\u043e\u0435\u0442 \u0448\u043b\u0430\u0433\u0431\u0430\u0443\u043c"}}},navbar:{home:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",history:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f",parkings:"\u041f\u0430\u0440\u043a\u043e\u0432\u043a\u0438",profile:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}}),i),R=o.a.createContext(B[a.RUS]),U=t(1),z=function(e){var n=e.onLoginClick,t=e.onSendCodeClick,r=e.isError,a=Object(c.useContext)(R),i=Object(c.useState)(""),o=Object(m.a)(i,2),s=o[0],u=o[1],l=Object(c.useState)(""),d=Object(m.a)(l,2),h=d[0],b=d[1],j=Object(c.useState)(!1),p=Object(m.a)(j,2),x=p[0],g=p[1];if(r)return Object(U.jsx)(U.Fragment,{children:"Error"});return Object(U.jsxs)(O,{children:[Object(U.jsx)(f.e,{type:"text",placeholder:a.pages.login.phoneNumber,valueChange:function(e){return u(e)}}),x&&Object(U.jsx)(f.e,{type:"text",placeholder:a.pages.login.sendConfirmationCodePlaceholder,valueChange:function(e){return b(e)}}),Object(U.jsx)(f.a,{title:x?a.pages.login.login:a.pages.login.sendConfirmationCodeBtn,click:function(){return x?n(s,h):(g(!0),void t(s))}})]})},I=t(8),W=t.n(I),J=t(10),L=function(){return function(){var e=Object(J.a)(W.a.mark((function e(n){var t,r;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&n.url){e.next=2;break}throw new Error("\u041f");case 2:if("GET"===n.method||!("body"in n)||!n.url){e.next=15;break}return e.prev=3,e.next=6,fetch(n.url,{method:n.method,body:JSON.stringify(n.body),headers:"headers"in n?n.headers:{}});case 6:return t=e.sent,e.next=9,t.json();case 9:case 21:return e.abrupt("return",e.sent);case 12:return e.prev=12,e.t0=e.catch(3),e.abrupt("return",null);case 15:return e.prev=15,e.next=18,fetch(n.url,{method:"GET",headers:"headers"in n?n.headers:{}});case 18:return r=e.sent,e.next=21,r.json();case 24:throw e.prev=24,e.t1=e.catch(15),new Error("\u0427\u0442\u043e \u0442\u043e \u043d\u0435 \u0442\u0430\u043a");case 27:case"end":return e.stop()}}),e,null,[[3,12],[15,24]])})));return function(n){return e.apply(this,arguments)}}()},M=L(),q="https://smart-parking-system-server.herokuapp.com/api/",A=function(){var e=Object(J.a)(W.a.mark((function e(n,t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M({url:q+t+"/driver/send-confirmation-code",method:"POST",body:{phoneNumber:n},headers:{"Content-Type":"application/json"}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),F=function(){var e=Object(J.a)(W.a.mark((function e(n,t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M({url:q+t+"/driver/login",method:"POST",body:n,headers:{"Content-Type":"application/json"}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),H=function(){var e=Object(J.a)(W.a.mark((function e(n,t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,M({url:q+t+"/driver",method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),D=function(){var e=localStorage.getItem("at");return{login:F,sendConfirmationCode:A,driver:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"v4";return H(e,n)}}},K=(t(21),function(){var e=D(),n=Object(d.h)(),t=Object(c.useState)(!1),r=Object(m.a)(t,2),a=r[0],i=r[1];return Object(U.jsx)(z,{onLoginClick:function(t,r){e.login({phoneNumber:t,confirmationCode:r},"v4").then((function(e){e&&"accessToken"in e&&(localStorage.setItem("at",e.accessToken),n("/home"))}))},onSendCodeClick:function(n){e.sendConfirmationCode(n,"v4").then((function(e){e&&"error"in e&&i(!0)}))},isError:a})}),Q=function(){var e=p(),n=Object(c.useContext)(R),t={textDecoration:"none",cursor:"pointer",color:Object(f.f)().plainText};return Object(U.jsxs)(f.b,{children:[Object(U.jsx)(f.c,{children:Object(U.jsx)(l.b,{to:e.home.main,style:t,children:n.navbar.home})}),Object(U.jsx)(f.c,{children:Object(U.jsx)(l.b,{to:e.home.main,style:t,children:n.navbar.history})}),Object(U.jsx)(f.c,{children:Object(U.jsx)(l.b,{to:e.home.main,style:t,children:n.navbar.parkings})}),Object(U.jsx)(f.c,{children:Object(U.jsx)(l.b,{to:e.home.main,style:t,children:n.navbar.profile})})]})},V=g.b.div(y||(y=Object(x.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 302px;\n  width: 928px;\n  background-color: ",";\n  border-radius: 29px;\n  box-shadow: inset 0 0 0 2px rgba(1, 1, 1, 0.15),\n    inset 0 0 0 4px rgba(136, 109, 236, 0.68), 0 0 28px 0 rgba(0, 0, 0, 0.08);\n"])),(function(e){return e.theme.widgetBackground})),X=g.b.div(k||(k=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  width: 574px;\n"]))),Y=g.b.div(C||(C=Object(x.a)(["\n  display: flex;\n  align-items: center;\n"]))),Z=g.b.span(S||(S=Object(x.a)(["\n  font-size: 40px;\n  color: ",";\n"])),(function(e){return e.theme.accent})),$=g.b.span(w||(w=Object(x.a)(["\n  margin-left: 66px;\n  font-size: 18px;\n  padding-bottom: 12px;\n  padding-top: 12px;\n  color: ",";\n"])),(function(e){return e.theme.plainText})),_=function(){var e=Object(c.useContext)(R);return Object(U.jsx)(V,{children:Object(U.jsxs)(X,{children:[Object(U.jsxs)(Y,{children:[Object(U.jsx)(Z,{children:"1"}),Object(U.jsx)($,{children:e.pages.home.rules.first})]}),Object(U.jsxs)(Y,{children:[Object(U.jsx)(Z,{children:"2"}),Object(U.jsx)($,{children:e.pages.home.rules.second})]}),Object(U.jsxs)(Y,{children:[Object(U.jsx)(Z,{children:"3"}),Object(U.jsx)($,{children:e.pages.home.rules.third})]})]})})},ee=g.b.div(E||(E=Object(x.a)(["\n  display: flex;\n  justify-content: center;\n"]))),ne=g.b.div(T||(T=Object(x.a)(["\n  margin-top: 31px;\n"]))),te=g.b.div(P||(P=Object(x.a)(["\n  display: flex;\n  margin-top: 26px;\n  justify-content: space-between;\n"]))),re=function(e){var n=e.parkingWidget;return Object(U.jsx)(ee,{children:Object(U.jsxs)(ne,{children:[Object(U.jsx)(_,{}),Object(U.jsxs)(te,{children:[Object(U.jsx)(f.d,{size:"mini",data:n}),Object(U.jsx)(f.d,{size:"mini",data:n})]})]})})},ae=L(),ie=function(){var e=Object(J.a)(W.a.mark((function e(n,t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,ae({url:"https://smart-parking-system-server.herokuapp.com/api/"+t+"/parking/pp/last",method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),ce=function(){var e,n=D(),t=function(){var e=localStorage.getItem("at");return{lastParkingProcess:function(){return ie(e,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"v4")}}}(),r=Object(c.useState)(),a=Object(m.a)(r,2),i=a[0],o=a[1];return Object(c.useEffect)((function(){Promise.all([n.driver(),t.lastParkingProcess()]).then((function(e){o(e[1])}))}),[]),i?Object(U.jsx)(re,{parkingWidget:(e=i,e.isCompleted?{parkingName:e.parking.title,date:e.entryCarTime,price:Math.trunc(e.payment.value),detailsClick:function(){}}:{price:Math.trunc(e.payment.value),detailsClick:function(){}})}):Object(U.jsx)(U.Fragment,{})},oe=g.b.div(N||(N=Object(x.a)(["\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n"]))),se=g.b.div(G||(G=Object(x.a)(["\n  background-color: ",";\n  height: 100vh;\n"])),(function(e){return e.theme.background})),ue=function(){return Object(U.jsxs)(oe,{children:[Object(U.jsx)(Q,{}),Object(U.jsx)(se,{children:Object(U.jsx)(d.b,{})})]})},le=function(){var e=p();return Object(U.jsxs)(d.e,{children:[Object(U.jsx)(d.c,{path:e.auth.login,element:Object(U.jsx)(K,{})}),Object(U.jsx)(d.c,{path:"/",element:Object(U.jsx)(ue,{}),children:Object(U.jsx)(d.c,{path:e.home.main,element:Object(U.jsx)(ce,{})})}),Object(U.jsx)(d.c,{path:"*",element:Object(U.jsx)(d.a,{to:e.auth.login})})]})};u.a.render(Object(U.jsx)(o.a.StrictMode,{children:Object(U.jsx)(g.a,{theme:Object(f.f)(),children:Object(U.jsx)(R.Provider,{value:B[localStorage.getItem("lang")?localStorage.getItem("lang")===a.RUS.toString()?a.RUS:a.ENG:/^ru\b/.test(navigator.language)?a.RUS:a.ENG],children:Object(U.jsx)(l.a,{children:Object(U.jsx)(le,{})})})})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.353dc6d4.chunk.js.map