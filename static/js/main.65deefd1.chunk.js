(this["webpackJsonpsmart-parking-system-client-web"]=this["webpackJsonpsmart-parking-system-client-web"]||[]).push([[0],{25:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var r,c,i,a=n(0),o=n.n(a),s=n(17),l=n.n(s),j=n(9),b=(n(25),n(3)),d="/auth",u="/history",O={auth:{login:d+"/login",registration:d+"/registration"},home:{main:"/home"},history:{main:u,details:u+"/details/:id"}},h=function(){return O},g=n(4),m=n(6),x=n(5),p=n(2),f=p.b.div(r||(r=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 15%;\n"]))),v=n(11);!function(e){e[e.RUS=0]="RUS",e[e.ENG=1]="ENG"}(c||(c={}));var y,C,k,S,P,w,E,D,T,N,U,L,B,z=(i={},Object(v.a)(i,c.ENG,{pages:{login:{phoneNumber:"Phone number",sendConfirmationCodeBtn:"Code",login:"Login",sendConfirmationCodePlaceholder:"Confirmation code"},home:{rules:{first:"Before entering, make sure that the rear license plate is readable",second:"When entering the parking lot, our camera reads your vehicle number, no action is required from you",third:"When leaving, the camera reads the vehicle number, then automatically deducts the required amount from your card and opens the barrier"}}},navbar:{home:"Home",history:"History",parkings:"Parkings",profile:"Profile"}}),Object(v.a)(i,c.RUS,{pages:{login:{phoneNumber:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",sendConfirmationCodeBtn:"\u041a\u043e\u0434",login:"\u0412\u043e\u0439\u0442\u0438",sendConfirmationCodePlaceholder:"\u041a\u043e\u0434 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f"},home:{rules:{first:"\u041f\u0435\u0440\u0435\u0434 \u0432\u044a\u0435\u0437\u0434\u043e\u043c \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435, \u0447\u0442\u043e \u0437\u0430\u0434\u043d\u0438\u0439 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0437\u043d\u0430\u043a \u0447\u0438\u0442\u0430\u0435\u043c",second:"\u041f\u0440\u0438 \u0432\u044a\u0435\u0437\u0434\u0435 \u043d\u0430 \u043f\u0430\u0440\u043a\u043e\u0432\u043a\u0443 \u043d\u0430\u0448\u0430 \u043a\u0430\u043c\u0435\u0440\u0430 \u0441\u0447\u0438\u0442\u0430\u0435\u0442 \u043d\u043e\u043c\u0435\u0440 \u0432\u0430\u0448\u0435\u0433\u043e \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043d\u043e\u0433\u043e \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430, \u043e\u0442 \u0432\u0430\u0441 \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439 \u043d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f",third:"\u041f\u0440\u0438 \u0432\u044b\u0435\u0437\u0434\u0435 \u043a\u0430\u043c\u0435\u0440\u0430 \u0441\u0447\u0438\u0442\u0430\u0435\u0442 \u043d\u043e\u043c\u0435\u0440 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043d\u043e\u0433\u043e  \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430, \u0437\u0430\u0442\u0435\u043c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0441\u043f\u0438\u0448\u0435\u0442 \u0441 \u0432\u0430\u0448\u0435\u0439 \u043a\u0430\u0440\u0442\u044b \u043d\u0443\u0436\u043d\u0443\u044e \u0441\u0443\u043c\u043c\u0443 \u0438 \u043e\u0442\u043a\u0440\u043e\u0435\u0442 \u0448\u043b\u0430\u0433\u0431\u0430\u0443\u043c"}}},navbar:{home:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",history:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f",parkings:"\u041f\u0430\u0440\u043a\u043e\u0432\u043a\u0438",profile:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}}),i),F=o.a.createContext(z[c.RUS]),I=n(1),R=function(e){var t=e.onLoginClick,n=e.onSendCodeClick,r=e.isError,c=Object(a.useContext)(F),i=Object(a.useState)(""),o=Object(g.a)(i,2),s=o[0],l=o[1],j=Object(a.useState)(""),b=Object(g.a)(j,2),d=b[0],u=b[1],O=Object(a.useState)(!1),h=Object(g.a)(O,2),x=h[0],p=h[1];if(r)return Object(I.jsx)(I.Fragment,{children:"Error"});return Object(I.jsxs)(f,{children:[Object(I.jsx)(m.g,{type:"text",placeholder:c.pages.login.phoneNumber,valueChange:function(e){return l(e)}}),x&&Object(I.jsx)(m.g,{type:"text",placeholder:c.pages.login.sendConfirmationCodePlaceholder,valueChange:function(e){return u(e)}}),Object(I.jsx)(m.a,{title:x?c.pages.login.login:c.pages.login.sendConfirmationCodeBtn,click:function(){return x?t(s,d):(p(!0),void n(s))}})]})},G=n(8),W=function(){var e=Object(G.b)(""),t=Object(b.h)(),n=Object(a.useState)(!1),r=Object(g.a)(n,2),c=r[0],i=r[1];return Object(I.jsx)(R,{onLoginClick:function(n,r){e.login({phoneNumber:n,confirmationCode:r},"v4").then((function(e){e&&"accessToken"in e&&(localStorage.setItem("at",e.accessToken),t("/home"))}))},onSendCodeClick:function(t){e.sendConfirmationCode(t,"v4").then((function(e){e&&"error"in e&&i(!0)}))},isError:c})},H=n(10),q=function(){var e=h(),t=Object(a.useContext)(F),n={textDecoration:"none",cursor:"pointer",color:Object(m.h)().plainText};return Object(I.jsx)("div",{style:{flexBasis:"56px"},children:Object(I.jsxs)(m.c,{children:[Object(I.jsx)(m.d,{children:Object(I.jsx)(j.b,{to:e.home.main,style:n,children:t.navbar.home})}),Object(I.jsx)(m.d,{children:Object(I.jsx)(j.b,{to:e.history.main,style:n,children:t.navbar.history})}),Object(I.jsx)(m.d,{children:Object(I.jsx)(j.b,{to:e.home.main,style:n,children:t.navbar.parkings})}),Object(I.jsx)(m.d,{children:Object(I.jsx)(j.b,{to:e.home.main,style:n,children:t.navbar.profile})})]})})},J=p.b.div(y||(y=Object(x.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 302px;\n  width: 928px;\n  background-color: ",";\n  border-radius: 29px;\n  box-shadow: inset 0 0 0 2px rgba(1, 1, 1, 0.15),\n    inset 0 0 0 4px rgba(136, 109, 236, 0.68), 0 0 28px 0 rgba(0, 0, 0, 0.08);\n"])),(function(e){return e.theme.widgetBackground})),M=p.b.div(C||(C=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  width: 574px;\n"]))),_=p.b.div(k||(k=Object(x.a)(["\n  display: flex;\n  align-items: center;\n"]))),A=p.b.span(S||(S=Object(x.a)(["\n  font-size: 40px;\n  color: ",";\n"])),(function(e){return e.theme.accent})),K=p.b.span(P||(P=Object(x.a)(["\n  margin-left: 66px;\n  font-size: 18px;\n  padding-bottom: 12px;\n  padding-top: 12px;\n  color: ",";\n"])),(function(e){return e.theme.plainText})),Q=function(){var e=Object(a.useContext)(F);return Object(I.jsx)(J,{children:Object(I.jsxs)(M,{children:[Object(I.jsxs)(_,{children:[Object(I.jsx)(A,{children:"1"}),Object(I.jsx)(K,{children:e.pages.home.rules.first})]}),Object(I.jsxs)(_,{children:[Object(I.jsx)(A,{children:"2"}),Object(I.jsx)(K,{children:e.pages.home.rules.second})]}),Object(I.jsxs)(_,{children:[Object(I.jsx)(A,{children:"3"}),Object(I.jsx)(K,{children:e.pages.home.rules.third})]})]})})},V=p.b.div(w||(w=Object(x.a)(["\n  width: 1015px;\n  padding: 48px 0;\n  border-radius: 35px;\n  background-color: ",";\n  color: ",";\n  font-size: 25px;\n  box-shadow: 0 0 10px rgba(25, 25, 25, 0.15);\n"])),(function(e){return e.theme.widgetBackground}),(function(e){return e.theme.plainText})),X=p.b.div(E||(E=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),Y=p.b.div(D||(D=Object(x.a)(["\n  margin-bottom: 15px;\n"]))),Z=function(e){var t=e.data,n=Object.entries(t);return n.length>0?Object(I.jsx)(V,{children:Object(I.jsx)(X,{children:n.map((function(e,t){var n=Object(g.a)(e,2),r=n[0],c=n[1];return Object(I.jsxs)(Y,{children:[r,": ",c]},t)}))})}):Object(I.jsx)("div",{children:"\u041f\u0443\u0441\u0442\u043e"})},$=p.b.div(T||(T=Object(x.a)(["\n  display: flex;\n  justify-content: center;\n"]))),ee=p.b.div(N||(N=Object(x.a)(["\n  margin-top: 31px;\n"]))),te=p.b.div(U||(U=Object(x.a)(["\n  display: flex;\n  margin-top: 26px;\n  justify-content: space-between;\n"]))),ne=p.b.div(L||(L=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n"]))),re=function(e){var t=e.parkingWidget,n=e.plate;return Object(I.jsx)($,{children:Object(I.jsxs)(ee,{children:[Object(I.jsx)(Q,{}),Object(I.jsxs)(te,{children:[Object(I.jsx)(m.e,{size:"mini",data:t}),Object(I.jsxs)(ne,{children:[Object(I.jsx)(m.b,{size:"mini",data:{leftSideContent:"\u0412\u0430\u0448\u0430 \u043a\u0430\u0440\u0442\u0430:",rightSideContent:":("}}),Object(I.jsx)(m.b,{size:"mini",data:{leftSideContent:"\u0412\u0430\u0448 \u043d\u043e\u043c\u0435\u0440:",rightSideContent:n}})]})]})]})})};!function(e){e[e.Driver=0]="Driver",e[e.CompletedParkingProcess=1]="CompletedParkingProcess",e[e.UncompletedParkingProcess=2]="UncompletedParkingProcess"}(B||(B={}));var ce,ie,ae,oe,se,le,je=function(e,t){switch(e){case B.Driver:return function(e){return Object(H.a)({},e)}(t);case B.CompletedParkingProcess:return function(e){return Object(H.a)(Object(H.a)({},e),{},{payment:{currency:e.payment.currency,value:Math.trunc(e.payment.value)}})}(t);case B.UncompletedParkingProcess:return function(e){return Object(H.a)(Object(H.a)({},e),{},{departureCarTime:null,payment:{currency:e.payment.currency,value:null},isCompleted:!1})}(t);default:throw new Error(e+" \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442")}},be=function(){var e=Object(G.b)(localStorage.getItem("at")),t=Object(G.c)(localStorage.getItem("at")),n=Object(a.useState)(),r=Object(g.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(""),s=Object(g.a)(o,2),l=s[0],j=s[1],b=Object(a.useState)(!1),d=Object(g.a)(b,2),u=d[0],O=d[1];return Object(a.useEffect)((function(){Promise.all([e.driver(),t.lastParkingProcess()]).then((function(e){var t=Object(g.a)(e,2),n=t[0],r=t[1];if(Object(G.a)(r)){var c=je(B.CompletedParkingProcess,r);if(!c)return void O(!0);i(c)}if(Object(G.a)(n)){var a=je(B.Driver,n);if(!a)return void O(!0);j(a.carPlates[0])}}))}),[]),u?Object(I.jsx)(I.Fragment,{children:"Error"}):c?Object(I.jsx)(re,{parkingWidget:Object(H.a)(Object(H.a)({},c),{},{price:c.payment.value,detailsClick:function(){return console.log("1")}}),plate:l}):Object(I.jsx)(I.Fragment,{children:"Loading"})},de=p.b.div(ce||(ce=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n"]))),ue=p.b.div(ie||(ie=Object(x.a)(["\n  flex-grow: 1;\n  background-color: ",";\n"])),(function(e){return e.theme.background})),Oe=function(){return Object(I.jsxs)(de,{children:[Object(I.jsx)(q,{}),Object(I.jsx)(ue,{children:Object(I.jsx)(b.b,{})})]})},he=p.b.div(ae||(ae=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),ge=p.b.div(oe||(oe=Object(x.a)(["\n  padding: 31px;\n"]))),me=p.b.div(se||(se=Object(x.a)(["\n  padding: 31px;\n"]))),xe=function(e){var t=e.parkingProcesses,n=e.onDetailsClick;return Object(I.jsxs)(he,{children:[Object(I.jsx)(me,{children:Object(I.jsx)(m.f,{clickHandler:function(){return console.log("Click")},parameters:["\u0412\u0440\u0435\u043c\u044f","\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",t[0].driver.carPlate]})}),!t.length&&Object(I.jsx)("div",{children:"\u041d\u0435\u0442"}),t.length>0&&t.map((function(e,t){return Object(I.jsx)(ge,{children:Object(I.jsx)(m.e,{size:"long",data:{date:e.entryCarTime,parkingName:e.parking.title,price:e.payment.value,detailsClick:function(){n(e._id)}}},t)},t)}))]})},pe=function(){var e=Object(G.b)(localStorage.getItem("at")),t=Object(b.h)(),n=Object(a.useState)(),r=Object(g.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(!1),s=Object(g.a)(o,2),l=s[0],j=s[1];Object(a.useEffect)((function(){e.parkingProcesses().then((function(e){if(Object(G.a)(e)){var t=e.map((function(e){return je(B.CompletedParkingProcess,e)}));i(t)}else j(!0)})).catch((function(){return j(!0)}))}),[]);return l?Object(I.jsx)(I.Fragment,{children:"Error"}):c?Object(I.jsx)(xe,{parkingProcesses:c,onDetailsClick:function(e){t("./details/"+e)}}):Object(I.jsx)(I.Fragment,{children:"Loading"})},fe=p.b.div(le||(le=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n"]))),ve=function(e){var t=e.data;return Object(I.jsx)(fe,{children:Object(I.jsx)(Z,{data:t})})},ye=function(e){return{"\u041f\u0430\u0440\u043a\u0438\u043d\u0433":e.parking.title,"\u0414\u0430\u0442\u0430 \u0432\u044a\u0435\u0437\u0434\u0430":new Date(e.entryCarTime).toLocaleDateString(),"\u0414\u0430\u0442\u0430 \u0432\u044b\u0435\u0437\u0434\u0430":new Date(e.departureCarTime).toLocaleDateString(),"\u0412\u0440\u0435\u043c\u044f \u0432\u044a\u0435\u0437\u0434\u0430":new Date(e.entryCarTime).toLocaleTimeString(),"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u0435\u0437\u0434\u0430":new Date(e.departureCarTime).toLocaleTimeString(),"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0437\u043d\u0430\u043a \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430":e.driver.carPlate,"\u0421\u0443\u043c\u043c\u0430":e.payment.value+""}},Ce=function(){var e=Object(G.c)(""),t=Object(b.i)().id,n=Object(a.useState)(),r=Object(g.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(!1),s=Object(g.a)(o,2),l=s[0],j=s[1];return Object(a.useEffect)((function(){t||j(!0),e.parkingProcess(t).then((function(e){if(Object(G.a)(e)){var t=je(B.CompletedParkingProcess,e);i(t)}else j(!0)}))})),l?Object(I.jsx)(I.Fragment,{children:"\u0427\u0442\u043e-\u0442\u043e \u043d\u0435 \u0442\u0430\u043a :("}):c?Object(I.jsx)(ve,{data:ye(c)}):Object(I.jsx)(I.Fragment,{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"})},ke=function(){var e=h();return Object(I.jsxs)(b.e,{children:[Object(I.jsx)(b.c,{path:e.auth.login,element:Object(I.jsx)(W,{})}),Object(I.jsxs)(b.c,{path:"/",element:Object(I.jsx)(Oe,{}),children:[Object(I.jsx)(b.c,{path:e.home.main,element:Object(I.jsx)(be,{})}),Object(I.jsx)(b.c,{path:e.history.main,element:Object(I.jsx)(pe,{})}),Object(I.jsx)(b.c,{path:e.history.details,element:Object(I.jsx)(Ce,{})})]}),Object(I.jsx)(b.c,{path:"*",element:Object(I.jsx)(b.a,{to:e.auth.login})})]})};l.a.render(Object(I.jsx)(o.a.StrictMode,{children:Object(I.jsx)(p.a,{theme:Object(m.h)(),children:Object(I.jsx)(F.Provider,{value:z[localStorage.getItem("lang")?localStorage.getItem("lang")===c.RUS.toString()?c.RUS:c.ENG:/^ru\b/.test(navigator.language)?c.RUS:c.ENG],children:Object(I.jsx)(j.a,{children:Object(I.jsx)(ke,{})})})})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.65deefd1.chunk.js.map