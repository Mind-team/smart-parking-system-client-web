(this["webpackJsonpsmart-parking-system-client-web"]=this["webpackJsonpsmart-parking-system-client-web"]||[]).push([[0],{26:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var r,a,i,c=n(0),o=n.n(c),s=n(17),u=n.n(s),l=n(9),d=(n(26),n(3)),b="/auth",h="/history",j={auth:{login:b+"/login",registration:b+"/registration"},home:{main:"/home"},history:{main:h,details:h+"/:id"}},p=function(){return j},f=n(5),m=n(4),x=n(6),g=n(2),O=g.b.div(r||(r=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 15%;\n"]))),v=n(15);!function(e){e[e.RUS=0]="RUS",e[e.ENG=1]="ENG"}(a||(a={}));var y,k,C,S,w,E,P,T,N,G,B,z=(i={},Object(v.a)(i,a.ENG,{pages:{login:{phoneNumber:"Phone number",sendConfirmationCodeBtn:"Code",login:"Login",sendConfirmationCodePlaceholder:"Confirmation code"},home:{rules:{first:"Before entering, make sure that the rear license plate is readable",second:"When entering the parking lot, our camera reads your vehicle number, no action is required from you",third:"When leaving, the camera reads the vehicle number, then automatically deducts the required amount from your card and opens the barrier"}}},navbar:{home:"Home",history:"History",parkings:"Parkings",profile:"Profile"}}),Object(v.a)(i,a.RUS,{pages:{login:{phoneNumber:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",sendConfirmationCodeBtn:"\u041a\u043e\u0434",login:"\u0412\u043e\u0439\u0442\u0438",sendConfirmationCodePlaceholder:"\u041a\u043e\u0434 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f"},home:{rules:{first:"\u041f\u0435\u0440\u0435\u0434 \u0432\u044a\u0435\u0437\u0434\u043e\u043c \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435, \u0447\u0442\u043e \u0437\u0430\u0434\u043d\u0438\u0439 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0437\u043d\u0430\u043a \u0447\u0438\u0442\u0430\u0435\u043c",second:"\u041f\u0440\u0438 \u0432\u044a\u0435\u0437\u0434\u0435 \u043d\u0430 \u043f\u0430\u0440\u043a\u043e\u0432\u043a\u0443 \u043d\u0430\u0448\u0430 \u043a\u0430\u043c\u0435\u0440\u0430 \u0441\u0447\u0438\u0442\u0430\u0435\u0442 \u043d\u043e\u043c\u0435\u0440 \u0432\u0430\u0448\u0435\u0433\u043e \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043d\u043e\u0433\u043e \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430, \u043e\u0442 \u0432\u0430\u0441 \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439 \u043d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f",third:"\u041f\u0440\u0438 \u0432\u044b\u0435\u0437\u0434\u0435 \u043a\u0430\u043c\u0435\u0440\u0430 \u0441\u0447\u0438\u0442\u0430\u0435\u0442 \u043d\u043e\u043c\u0435\u0440 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043d\u043e\u0433\u043e  \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430, \u0437\u0430\u0442\u0435\u043c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0441\u043f\u0438\u0448\u0435\u0442 \u0441 \u0432\u0430\u0448\u0435\u0439 \u043a\u0430\u0440\u0442\u044b \u043d\u0443\u0436\u043d\u0443\u044e \u0441\u0443\u043c\u043c\u0443 \u0438 \u043e\u0442\u043a\u0440\u043e\u0435\u0442 \u0448\u043b\u0430\u0433\u0431\u0430\u0443\u043c"}}},navbar:{home:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",history:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f",parkings:"\u041f\u0430\u0440\u043a\u043e\u0432\u043a\u0438",profile:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}}),i),R=o.a.createContext(z[a.RUS]),U=n(1),I=function(e){var t=e.onLoginClick,n=e.onSendCodeClick,r=e.isError,a=Object(c.useContext)(R),i=Object(c.useState)(""),o=Object(f.a)(i,2),s=o[0],u=o[1],l=Object(c.useState)(""),d=Object(f.a)(l,2),b=d[0],h=d[1],j=Object(c.useState)(!1),p=Object(f.a)(j,2),x=p[0],g=p[1];if(r)return Object(U.jsx)(U.Fragment,{children:"Error"});return Object(U.jsxs)(O,{children:[Object(U.jsx)(m.f,{type:"text",placeholder:a.pages.login.phoneNumber,valueChange:function(e){return u(e)}}),x&&Object(U.jsx)(m.f,{type:"text",placeholder:a.pages.login.sendConfirmationCodePlaceholder,valueChange:function(e){return h(e)}}),Object(U.jsx)(m.a,{title:x?a.pages.login.login:a.pages.login.sendConfirmationCodeBtn,click:function(){return x?t(s,b):(g(!0),void n(s))}})]})},W=n(8),J=n.n(W),L=n(10),M=function(){return function(){var e=Object(L.a)(J.a.mark((function e(t){var n,r;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.url){e.next=2;break}throw new Error("\u041f");case 2:if("GET"===t.method||!("body"in t)||!t.url){e.next=15;break}return e.prev=3,e.next=6,fetch(t.url,{method:t.method,body:JSON.stringify(t.body),headers:"headers"in t?t.headers:{}});case 6:return n=e.sent,e.next=9,n.json();case 9:case 21:return e.abrupt("return",e.sent);case 12:return e.prev=12,e.t0=e.catch(3),e.abrupt("return",null);case 15:return e.prev=15,e.next=18,fetch(t.url,{method:"GET",headers:"headers"in t?t.headers:{}});case 18:return r=e.sent,e.next=21,r.json();case 24:throw e.prev=24,e.t1=e.catch(15),new Error("\u0427\u0442\u043e \u0442\u043e \u043d\u0435 \u0442\u0430\u043a");case 27:case"end":return e.stop()}}),e,null,[[3,12],[15,24]])})));return function(t){return e.apply(this,arguments)}}()},q=M(),A="https://smart-parking-system-server.herokuapp.com/api/",F=function(){var e=Object(L.a)(J.a.mark((function e(t,n){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q({url:A+n+"/driver/send-confirmation-code",method:"POST",body:{phoneNumber:t},headers:{"Content-Type":"application/json"}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),H=function(){var e=Object(L.a)(J.a.mark((function e(t,n){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q({url:A+n+"/driver/login",method:"POST",body:t,headers:{"Content-Type":"application/json"}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=Object(L.a)(J.a.mark((function e(t,n){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,q({url:A+n+"/driver",method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),K=function(){var e=localStorage.getItem("at");return{login:H,sendConfirmationCode:F,driver:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"v4";return D(e,t)}}},Q=(n(21),function(){var e=K(),t=Object(d.h)(),n=Object(c.useState)(!1),r=Object(f.a)(n,2),a=r[0],i=r[1];return Object(U.jsx)(I,{onLoginClick:function(n,r){e.login({phoneNumber:n,confirmationCode:r},"v4").then((function(e){e&&"accessToken"in e&&(localStorage.setItem("at",e.accessToken),t("/home"))}))},onSendCodeClick:function(t){e.sendConfirmationCode(t,"v4").then((function(e){e&&"error"in e&&i(!0)}))},isError:a})}),V=function(){var e=p(),t=Object(c.useContext)(R),n={textDecoration:"none",cursor:"pointer",color:Object(m.g)().plainText};return Object(U.jsxs)(m.c,{children:[Object(U.jsx)(m.d,{children:Object(U.jsx)(l.b,{to:e.home.main,style:n,children:t.navbar.home})}),Object(U.jsx)(m.d,{children:Object(U.jsx)(l.b,{to:e.home.main,style:n,children:t.navbar.history})}),Object(U.jsx)(m.d,{children:Object(U.jsx)(l.b,{to:e.home.main,style:n,children:t.navbar.parkings})}),Object(U.jsx)(m.d,{children:Object(U.jsx)(l.b,{to:e.home.main,style:n,children:t.navbar.profile})})]})},X=g.b.div(y||(y=Object(x.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 302px;\n  width: 928px;\n  background-color: ",";\n  border-radius: 29px;\n  box-shadow: inset 0 0 0 2px rgba(1, 1, 1, 0.15),\n    inset 0 0 0 4px rgba(136, 109, 236, 0.68), 0 0 28px 0 rgba(0, 0, 0, 0.08);\n"])),(function(e){return e.theme.widgetBackground})),Y=g.b.div(k||(k=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  width: 574px;\n"]))),Z=g.b.div(C||(C=Object(x.a)(["\n  display: flex;\n  align-items: center;\n"]))),$=g.b.span(S||(S=Object(x.a)(["\n  font-size: 40px;\n  color: ",";\n"])),(function(e){return e.theme.accent})),_=g.b.span(w||(w=Object(x.a)(["\n  margin-left: 66px;\n  font-size: 18px;\n  padding-bottom: 12px;\n  padding-top: 12px;\n  color: ",";\n"])),(function(e){return e.theme.plainText})),ee=function(){var e=Object(c.useContext)(R);return Object(U.jsx)(X,{children:Object(U.jsxs)(Y,{children:[Object(U.jsxs)(Z,{children:[Object(U.jsx)($,{children:"1"}),Object(U.jsx)(_,{children:e.pages.home.rules.first})]}),Object(U.jsxs)(Z,{children:[Object(U.jsx)($,{children:"2"}),Object(U.jsx)(_,{children:e.pages.home.rules.second})]}),Object(U.jsxs)(Z,{children:[Object(U.jsx)($,{children:"3"}),Object(U.jsx)(_,{children:e.pages.home.rules.third})]})]})})},te=g.b.div(E||(E=Object(x.a)(["\n  display: flex;\n  justify-content: center;\n"]))),ne=g.b.div(P||(P=Object(x.a)(["\n  margin-top: 31px;\n"]))),re=g.b.div(T||(T=Object(x.a)(["\n  display: flex;\n  margin-top: 26px;\n  justify-content: space-between;\n"]))),ae=g.b.div(N||(N=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n"]))),ie=function(e){var t=e.parkingWidget,n=e.plate;return Object(U.jsx)(te,{children:Object(U.jsxs)(ne,{children:[Object(U.jsx)(ee,{}),Object(U.jsxs)(re,{children:[Object(U.jsx)(m.e,{size:"mini",data:t}),Object(U.jsxs)(ae,{children:[Object(U.jsx)(m.b,{size:"mini",data:{leftSideContent:"\u0412\u0430\u0448\u0430 \u043a\u0430\u0440\u0442\u0430:",rightSideContent:":("}}),Object(U.jsx)(m.b,{size:"mini",data:{leftSideContent:"\u0412\u0430\u0448 \u043d\u043e\u043c\u0435\u0440:",rightSideContent:n}})]})]})]})})},ce=M(),oe=function(){var e=Object(L.a)(J.a.mark((function e(t,n){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,ce({url:"https://smart-parking-system-server.herokuapp.com/api/"+n+"/parking/pp/last",method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),se=function(){var e,t=K(),n=function(){var e=localStorage.getItem("at");return{lastParkingProcess:function(){return oe(e,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"v4")}}}(),r=Object(c.useState)(),a=Object(f.a)(r,2),i=a[0],o=a[1],s=Object(c.useState)(""),u=Object(f.a)(s,2),l=u[0],d=u[1];return Object(c.useEffect)((function(){Promise.all([t.driver(),n.lastParkingProcess()]).then((function(e){o(e[1]),e[0]&&e[0].carPlates[0]&&d(e[0].carPlates[0])}))}),[]),i?Object(U.jsx)(ie,{parkingWidget:(e=i,e.isCompleted?{parkingName:e.parking.title,date:e.entryCarTime,price:Math.trunc(e.payment.value),detailsClick:function(){}}:{price:Math.trunc(e.payment.value),detailsClick:function(){}}),plate:l}):Object(U.jsx)(U.Fragment,{})},ue=g.b.div(G||(G=Object(x.a)(["\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n"]))),le=g.b.div(B||(B=Object(x.a)(["\n  background-color: ",";\n  height: 100vh;\n"])),(function(e){return e.theme.background})),de=function(){return Object(U.jsxs)(ue,{children:[Object(U.jsx)(V,{}),Object(U.jsx)(le,{children:Object(U.jsx)(d.b,{})})]})},be=function(){var e=p();return Object(U.jsxs)(d.e,{children:[Object(U.jsx)(d.c,{path:e.auth.login,element:Object(U.jsx)(Q,{})}),Object(U.jsx)(d.c,{path:"/",element:Object(U.jsx)(de,{}),children:Object(U.jsx)(d.c,{path:e.home.main,element:Object(U.jsx)(se,{})})}),Object(U.jsx)(d.c,{path:"*",element:Object(U.jsx)(d.a,{to:e.auth.login})})]})};u.a.render(Object(U.jsx)(o.a.StrictMode,{children:Object(U.jsx)(g.a,{theme:Object(m.g)(),children:Object(U.jsx)(R.Provider,{value:z[localStorage.getItem("lang")?localStorage.getItem("lang")===a.RUS.toString()?a.RUS:a.ENG:/^ru\b/.test(navigator.language)?a.RUS:a.ENG],children:Object(U.jsx)(l.a,{children:Object(U.jsx)(be,{})})})})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.d006dc3e.chunk.js.map