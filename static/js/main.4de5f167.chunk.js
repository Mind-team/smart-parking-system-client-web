(this["webpackJsonpsmart-parking-system-client-web"]=this["webpackJsonpsmart-parking-system-client-web"]||[]).push([[0],{26:function(e,n,t){},33:function(e,n,t){"use strict";t.r(n);var r,o,a,i=t(0),c=t.n(i),s=t(16),u=t.n(s),l=t(9),d=(t(26),t(1)),h="/auth",b="/history",p={auth:{login:h+"/login",registration:h+"/registration"},home:{main:"/home"},history:{main:b,details:b+"/:id"}},j=function(){return p},m=t(4),f=t(7),g=t(20),O=t(3),x=O.b.div(r||(r=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 15%;\n"]))),C=t(14);!function(e){e[e.RUS=0]="RUS",e[e.ENG=1]="ENG"}(o||(o={}));var v=(a={},Object(C.a)(a,o.ENG,{pages:{login:{phoneNumber:"Phone number",sendConfirmationCodeBtn:"Code",login:"Login",sendConfirmationCodePlaceholder:"Confirmation code"}},navbar:{home:"Home",history:"History",parkings:"Parkings",profile:"Profile"}}),Object(C.a)(a,o.RUS,{pages:{login:{phoneNumber:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",sendConfirmationCodeBtn:"\u041a\u043e\u0434",login:"\u0412\u043e\u0439\u0442\u0438",sendConfirmationCodePlaceholder:"\u041a\u043e\u0434 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f"}},navbar:{home:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",history:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f",parkings:"\u041f\u0430\u0440\u043a\u043e\u0432\u043a\u0438",profile:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}}),a),k=c.a.createContext(v[o.RUS]),y=t(2),S=function(e){var n=e.onLoginClick,t=e.onSendCodeClick,r=e.isError,o=Object(i.useContext)(k),a=Object(i.useState)(""),c=Object(m.a)(a,2),s=c[0],u=c[1],l=Object(i.useState)(""),d=Object(m.a)(l,2),h=d[0],b=d[1],p=Object(i.useState)(!1),j=Object(m.a)(p,2),g=j[0],O=j[1];if(r)return Object(y.jsx)(y.Fragment,{children:"Error"});return Object(y.jsxs)(x,{children:[Object(y.jsx)(f.b,{type:"text",placeholder:o.pages.login.phoneNumber,valueChange:function(e){return u(e)}}),g&&Object(y.jsx)(f.b,{type:"text",placeholder:o.pages.login.sendConfirmationCodePlaceholder,valueChange:function(e){return b(e)}}),Object(y.jsx)(f.a,{title:g?o.pages.login.login:o.pages.login.sendConfirmationCodeBtn,click:function(){return g?n(s,h):(O(!0),void t(s))}})]})},w=t(6),E=t.n(w),N=t(8),T=function(){var e=Object(N.a)(E.a.mark((function e(n){var t,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&n.url){e.next=2;break}throw new Error("\u041f");case 2:if("GET"===n.method||!("body"in n)||!n.url){e.next=15;break}return e.prev=3,e.next=6,fetch(n.url,{method:n.method,body:JSON.stringify(n.body),headers:"headers"in n?n.headers:{}});case 6:return t=e.sent,e.next=9,t.json();case 9:case 21:return e.abrupt("return",e.sent);case 12:return e.prev=12,e.t0=e.catch(3),e.abrupt("return",null);case 15:return e.prev=15,e.next=18,fetch(n.url,{method:"GET",headers:"headers"in n?n.headers:{}});case 18:return r=e.sent,e.next=21,r.json();case 24:throw e.prev=24,e.t1=e.catch(15),new Error("\u0427\u0442\u043e \u0442\u043e \u043d\u0435 \u0442\u0430\u043a");case 27:case"end":return e.stop()}}),e,null,[[3,12],[15,24]])})));return function(n){return e.apply(this,arguments)}}(),P="https://smart-parking-system-server.herokuapp.com/api/",G=function(){var e=Object(N.a)(E.a.mark((function e(n,t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T({url:P+t+"/driver/send-confirmation-code",method:"POST",body:{phoneNumber:n},headers:{"Content-Type":"application/json"}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),R=function(){var e=Object(N.a)(E.a.mark((function e(n,t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T({url:P+t+"/driver/login",method:"POST",body:n,headers:{"Content-Type":"application/json"}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),U=(t(21),function(){var e={login:R,sendConfirmationCode:G},n=(j(),Object(d.g)()),t=Object(i.useState)({accessToken:null}),r=Object(m.a)(t,2),o=(r[0],r[1]),a=Object(i.useState)(!1),c=Object(m.a)(a,2),s=c[0],u=c[1];return Object(y.jsx)(S,{onLoginClick:function(t,r){e.login({phoneNumber:t,confirmationCode:r},"v4").then((function(e){e&&"accessToken"in e&&(o({accessToken:e.accessToken}),n("/home"))}))},onSendCodeClick:function(n){e.sendConfirmationCode(n,"v4").then((function(e){e&&"error"in e&&u(!0)}))},isError:s})}),B=function(){return Object(y.jsx)(y.Fragment,{children:"Home"})},H=function(){return Object(y.jsx)(B,{})},I=function(){var e=j();return Object(y.jsxs)(d.d,{children:[Object(y.jsx)(d.b,{path:e.auth.login,element:Object(y.jsx)(U,{})}),Object(y.jsx)(d.b,{path:e.home.main,element:Object(y.jsx)(H,{})}),Object(y.jsx)(d.b,{path:"*",element:Object(y.jsx)(d.a,{to:e.auth.login})})]})};u.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(O.a,{theme:Object(f.c)(),children:Object(y.jsx)(k.Provider,{value:v[localStorage.getItem("lang")?localStorage.getItem("lang")===o.RUS.toString()?o.RUS:o.ENG:/^ru\b/.test(navigator.language)?o.RUS:o.ENG],children:Object(y.jsx)(l.a,{children:Object(y.jsx)(I,{})})})})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.4de5f167.chunk.js.map